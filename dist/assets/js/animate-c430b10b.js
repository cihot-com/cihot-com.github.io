import{r as t}from"./resolve-element-fe803a1b.js";import{k as n,S as e,H as s,l as a,s as r,n as o,o as i,m as l,q as u,b as c,r as h,i as f,p,e as m,t as y,x as g,y as d,z as A}from"./SVGVisualElement-41b90df8.js";class GroupPlaybackControls{constructor(t){this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let e=0;e<this.animations.length;e++)this.animations[e][t]=n}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach((n=>n[t]()))}play(){this.runAll("play")}pause(){this.runAll("pause")}stop(){this.runAll("stop")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function v(t){const r={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},o=n(t)?new e(r,{enableHardwareAcceleration:!1}):new s(r,{enableHardwareAcceleration:!0});o.mount(t),a.set(t,o)}function b(t,n=100){const e=r({keyframes:[0,n],...t}),s=Math.min(o(e),i);return{type:"keyframes",ease:t=>e.next(s*t).value/n,duration:l(s)}}function k(t,n,e,s){var a;return"number"==typeof n?n:n.startsWith("-")||n.startsWith("+")?Math.max(0,t+parseFloat(n)):"<"===n?e:null!==(a=s.get(n))&&void 0!==a?a:t}const w=(t,n,e)=>{const s=n-t;return((e-t)%s+s)%s+t};function M(t,n){return u(t)?t[w(0,t.length,n)]:t}function x(t,n,e,s,a,r){!function(t,n,e){for(let s=0;s<t.length;s++){const a=t[s];a.at>n&&a.at<e&&(h(t,a),s--)}}(t,a,r);for(let o=0;o<n.length;o++)t.push({value:n[o],at:c(a,r,s[o]),easing:M(e,o)})}function P(t,n){return t.at===n.at?null===t.value?1:null===n.value?-1:0:t.at-n.at}const C="easeInOut";function E(t,n){return!n.has(t)&&n.set(t,{}),n.get(t)}function G(t,n){return n[t]||(n[t]=[]),n[t]}function O(t){return Array.isArray(t)?t:[t]}function S(t,n){return t[n]?{...t,...t[n]}:{...t}}const j=t=>"number"==typeof t,H=t=>t.every(j);function V(n,e,s,r){const o=t(n,r),i=o.length,l=[];for(let t=0;t<i;t++){const n=o[t];a.has(n)||v(n);const r=a.get(n),u={...s};"function"==typeof u.delay&&(u.delay=u.delay(t,i)),l.push(...A(r,{...e,transition:u},{}))}return new GroupPlaybackControls(l)}function W(n,e,s){const a=[],r=function(n,{defaultTransition:e={},...s}={},a){const r=e.duration||.3,o=new Map,i=new Map,l={},u=new Map;let c=0,h=0,d=0;for(let p=0;p<n.length;p++){const s=n[p];if("string"==typeof s){u.set(s,h);continue}if(!Array.isArray(s)){u.set(s.name,k(h,s.at,c,u));continue}let[o,A,v={}]=s;void 0!==v.at&&(h=k(h,v.at,c,u));let w=0;const M=(t,n,s,a=0,o=0)=>{const i=O(t),{delay:l=0,times:u=m(i),type:c="keyframes",...f}=n;let{ease:p=e.ease||"easeOut",duration:A}=n;const v="function"==typeof l?l(a,o):l,k=i.length;if(k<=2&&"spring"===c){let t=100;if(2===k&&H(i)){const n=i[1]-i[0];t=Math.abs(n)}const n={...f};void 0!==A&&(n.duration=g(A));const e=b(n,t);p=e.ease,A=e.duration}null!=A||(A=r);const M=h+v,P=M+A;1===u.length&&0===u[0]&&(u[1]=1);const C=u.length-i.length;C>0&&y(u,C),1===i.length&&i.unshift(null),x(s,i,p,u,M,P),w=Math.max(v+A,w),d=Math.max(P,d)};if(f(o))M(A,v,G("default",E(o,i)));else{const n=t(o,a,l),e=n.length;for(let t=0;t<e;t++){const s=E(n[t],i);for(const n in A)M(A[n],S(v,n),G(n,s),t,e)}c=h,h+=w}}return i.forEach(((t,n)=>{for(const a in t){const r=t[a];r.sort(P);const i=[],l=[],u=[];for(let t=0;t<r.length;t++){const{at:n,value:e,easing:s}=r[t];i.push(e),l.push(p(0,d,n)),u.push(s||"easeOut")}0!==l[0]&&(l.unshift(0),i.unshift(i[0]),u.unshift(C)),1!==l[l.length-1]&&(l.push(1),i.push(null)),o.has(n)||o.set(n,{keyframes:{},transition:{}});const c=o.get(n);c.keyframes[a]=i,c.transition[a]={...e,duration:d,ease:u,times:l,...s}}})),o}(n,e,s);return r.forEach((({keyframes:t,transition:n},e)=>{let s;s=f(e)?d(e,t.default,n.default):V(e,t,n),a.push(s)})),new GroupPlaybackControls(a)}const q=t=>function(n,e,s){let a;var r;return r=n,a=Array.isArray(r)&&Array.isArray(r[0])?W(n,e,t):function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?V(n,e,s,t):d(n,e,s),t&&t.animations.push(a),a},z=q();export{z as a,q as c};
