import{b as e,j as t,n as o}from"./index-8f1f19a3.js";import{A as a}from"./Api-22cc4065.js";import"./axios-80c154f5.js";const n=async(e,t)=>{try{const o=await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});return await o.json()}catch(o){return{error:null==o?void 0:o.code}}},r=e=>{const t=new FormData(e);return Object.fromEntries(t)};function l(){const o=e.useRef(null),l=e.useRef(null);return t.jsxs(s,{children:[t.jsxs("figure",{children:[t.jsxs("form",{method:"dialog",ref:o,autoComplete:"off",children:[t.jsx("h4",{children:"users"}),t.jsx("input",{type:"text",id:"email",name:"email",placeholder:"email",defaultValue:"ddb1494@gmail.com"}),t.jsx("input",{type:"password",id:"password",name:"password",placeholder:"password",defaultValue:"Qwer"}),t.jsx("input",{type:"number",name:"id",placeholder:"id",defaultValue:"1"})]}),t.jsx("button",{onClick:async e=>{const{email:t,password:a}=r(o.current);n("http://localhost:3300/user",{email:t,password:a})},children:"회원가입"}),t.jsx("button",{onClick:async e=>{const{email:t,password:a}=r(o.current),{token:l,error:s}=await n("http://localhost:3300/user/login",{email:t,password:a});s||l&&localStorage.setItem("token",l)},children:"로그인"}),t.jsx("button",{onClick:async e=>{const{id:t}=r(o.current),{data:n}=await a.delete("http://localhost:3300/user/"+t)},children:"회원삭제"})]}),t.jsxs("figure",{children:[t.jsxs("form",{method:"dialog",ref:l,autoComplete:"off",children:[t.jsx("h4",{children:"info"}),t.jsx("input",{type:"text",name:"name",placeholder:"name",defaultValue:"name"}),t.jsx("input",{type:"email",name:"email",placeholder:"email",defaultValue:"email"})]}),t.jsx("button",{onClick:()=>{(async(e,t)=>{try{if(t&&"object"==typeof t){const o=new URL(e);o.search=new URLSearchParams(t).toString(),e=o.toString()}const o=await fetch(e,{method:"GET",headers:{authorization:`Bearer ${localStorage.getItem("token")}`}});return await o.json()}catch(o){return{error:null==o?void 0:o.code}}})("http://localhost:3300/user/info")},children:"정보조회"}),t.jsx("button",{onClick:()=>{const{name:e,email:t}=r(l.current);(async(e,t)=>{try{const o=await fetch(e,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});return await o.json()}catch(o){return{error:null==o?void 0:o.code}}})("http://localhost:3300/user/1",{name:e,email:t,picture:null,deletedAt:null})},children:"정보수정"})]}),t.jsxs("figure",{children:[t.jsx("h4",{children:"Google OAuth Login"}),t.jsxs("form",{method:"dialog",onSubmit:async e=>{e.preventDefault();const{type:t,token:o}=r(e.target);await a.post("/user/oauth",{type:t,token:o})},children:[t.jsxs("select",{name:"type",children:[t.jsx("option",{value:"google",children:"구글"}),t.jsx("option",{value:"kakao",children:"카카오"}),t.jsx("option",{value:"naver",children:"네이버"})]}),t.jsx("input",{type:"token",name:"token",placeholder:"token"}),t.jsx("input",{type:"submit",value:"구글 토큰 로그인"})]})]})]})}const s=o.div``;export{l as default};
