import{b as e,j as t,n,d as o}from"./index-890d70c3.js";import{R as s,Q as r}from"./index-4006b775.js";import{c as i}from"./emotion-react.browser.esm-c234fe41.js";import{A as a}from"./index-7836b9fa.js";import{m as l}from"./motion-1e207df9.js";import{u as d}from"./use-motion-value-9c2a72a8.js";import{w as c}from"./index-e150302c.js";import"./SVGVisualElement-77214677.js";import"./index-7074372a.js";import"./use-unmount-effect-807b54ef.js";import"./typeof-b9ca4a95.js";import"./index-473d2a95.js";function u(){const[n,o]=e.useState("");return t.jsx(s,{theme:"snow",value:n,onChange:o})}function m(){const[n,o]=e.useState("Noto Sans KR"),[r,a]=e.useState("abc 123 안녕 国风"),[l,d]=e.useState(0);return t.jsxs("div",{className:"Root",css:i`
        .ql-font-roboto {
          color: red;
          font-family: ${n} !important;
        }
      `,children:[t.jsx(s,{modules:{toolbar:!1},onChangeSelection:(e,t,n)=>{},theme:"snow",value:r,onChange:(e,t,n,o)=>{a(e);const s=o.getText().length;d(s)}}),t.jsx("div",{id:"counter"}),t.jsx("div",{children:l}),t.jsx("div",{children:r}),t.jsxs("div",{children:[t.jsx("input",{value:n,onChange:e=>o(e.target.value)}),t.jsx("button",{onClick:()=>a(""),children:"Clear"}),t.jsx("button",{onClick:()=>{const e=document.querySelector(".ql-editor"),t=(e.getSelection(),e.getSelection(!0));e.insertText(t.index,"abc"),e.setSelection(t.index+3,0)},children:"replace selected"})]})]})}const x=n.figure`
  table {
    width: 100%;
    /* table-layout: fixed; */
    tbody {
      width: 100%;
      max-height: 200px;
      overflow-y: auto;

      td {
        max-width: 3em;
        word-break: break-all;
        text-overflow: ellipsis;
        &.args {
          max-width: max-content;
          word-break: break-word;
          white-space: pre-wrap;
        }
      }
    }
  }
`;function f({name:n,list:o}){const s=e.useRef(null),r=e.useMemo((()=>{const e=new Set;return o.forEach((t=>{Object.keys(t).forEach((t=>e.add(t)))})),e}),[o]);return t.jsxs(x,{children:[t.jsx("figcaption",{children:n}),t.jsxs("table",{children:[t.jsx("thead",{children:t.jsx("tr",{children:Array.from(r).map(((e,n)=>t.jsx("th",{children:e},n)))})}),t.jsx("tbody",{ref:s,children:t.jsx(a,{mode:"popLayout",presenceAffectsLayout:!0,children:o.map(((e,n)=>t.jsx(l.tr,{layoutId:String(e.key),layoutDependency:s,initial:{opacity:1},animate:{opacity:.5,transition:{opacity:{delay:1}}},exit:{opacity:0,y:10,transition:{duration:0}},transition:{type:"just"},children:Array.from(r).map(((n,o)=>t.jsx("td",{className:n,children:e[n]},o)))},String(e.key))))})})]})]})}f.defaultProps={name:"InfoPanel"};const p=r.import("core/module");class MyModule extends p{constructor(e,t){super(e,t)}say(){}}r.register("modules/myModule",MyModule,!0);navigator.platform.toUpperCase().indexOf("MAC");const h={theme:"snow",placeholder:"Compose an epic...",modules:{toolbar:!1,myModule:MyModule,history:{userOnly:!0}}};function j(){e.useRef(null);const n=e.useRef(null),[s,i]=e.useState("hi quill"),a=d(""),[u,m]=e.useState(""),[x,p]=e.useState((()=>[])),[j,g]=e.useState(""),[y,b]=e.useState(""),[S,v]=e.useState(),[w,k]=e.useState(1),[C,M]=e.useState((()=>({top:0,left:0})));return e.useLayoutEffect((()=>{const e=new r(n.current,h);v(e),e.setText(s),e.formatText(0,2,"bold",!0),e.formatText(1,2,"italic",!0),e.focus(),e.keyboard.addBinding({key:"Space"},{collapsed:!0,format:{list:!1},prefix:/^-$/,offset:1},(function(t,n){e.deleteText(t.index-1,1),e.formatLine(t.index,1,"list","bullet")}));{const t="qui",n=e.getText().indexOf(t);-1!==n&&e.formatText(n,t.length,{color:"#f0f",bold:!0,background:"#ff0",border:"3px solid #f00"}),e.clipboard.dangerouslyPasteHTML(5,'<b>World <img src="/images/11.png"></b>')}e.on("editor-change",((t,...n)=>{const o={key:(Date.now()+Math.random()).toString(36),time:c(Date.now(),"HH:mm:ss.SSS"),eventName:t,args:JSON.stringify(n)};p((e=>[o,...e].slice(0,2)));const s=e.getSelection();M(s?e.getBounds(s.index):{top:-100,left:-100})})),e.on("text-change",((t,n,o)=>{k(e.getLength()),m(JSON.stringify({delta:t,oldDelta:n,source:o},null,2))})),e.on("selection-change",((e,t,n)=>{g(JSON.stringify({range:e,oldRange:t,source:n},null,2))})),e.keyboard.addBinding({key:" ",altKey:!0,shiftKey:!0},{collapsed:!0,prefix:/a$/,format:{bold:!0}},((e,t)=>{}));const t=e=>{};return addEventListener("keydown",t,{capture:!0,passive:!1}),()=>{removeEventListener("keydown",t,!0)}}),[]),t.jsxs("div",{children:[t.jsx("div",{ref:n}),o.createPortal(t.jsx(l.div,{className:"ql-editor-tip",style:{position:"absolute",top:C?C.top+100:0,left:null==C?void 0:C.left,backgroundColor:"#f008"},children:"bound"}),n.current??document.body),t.jsxs("div",{children:[t.jsx("button",{onClick:()=>{},children:"getContents"}),t.jsx("input",{type:"text",value:y,onChange:e=>b(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&S){e.preventDefault();const t=e.currentTarget.value,n=S.getSelection();if(n){const e=n.index;S.deleteText(e,n.length),S.insertText(e,t)}}}})]}),t.jsx(l.pre,{children:a}),t.jsxs("div",{children:["length: ",w-1," "]}),t.jsxs("code",{className:"info",children:[t.jsx(f,{name:"editor-change",list:x}),t.jsxs(l.pre,{children:[t.jsx("h3",{children:"textChange"}),u]}),t.jsxs(l.pre,{children:[t.jsx("h3",{children:"selectionChange"}),j]})]})]})}function g(){const[n,o]=e.useState("Ex3"),[s,r]=e.useState((()=>[{name:"Ex1",component:t.jsx(u,{})},{name:"Ex2",component:t.jsx(m,{})},{name:"Ex3",component:t.jsx(j,{})}])),i=e.useMemo((()=>{var e;return null==(e=s.find((e=>e.name===n)))?void 0:e.component}),[n]);return t.jsxs("div",{children:[t.jsx("nav",{children:s.map((({name:e,component:s})=>t.jsx("button",{disabled:n===e,onClick:()=>o(e),children:e},e)))}),i]})}export{g as default};
