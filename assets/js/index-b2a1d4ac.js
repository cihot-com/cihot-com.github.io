import{r as e,j as n,b as i,y as r,P as t,e as a,M as l,d as u}from"./index-d2e29b82.js";import{A as o}from"./index-03ec665a.js";import{m as c}from"./motion-f39b5207.js";var d=e.forwardRef((function(r,t){var a=e.useRef(null),l=e.useRef(null);return e.useImperativeHandle(t,(function(){return{elementRef:a,ulRef:l,getElement:function(){return l.current}}})),n("figure",{ref:a,children:[i("figcaption",{children:"Portal list"}),i(o,{children:i("ul",{ref:l})})]})})),f={initial:{x:10},animate:{x:0,transition:{delayChildren:1,staggerChildren:-1}},exit:{x:10}},s={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}};function m(r){var t=r.list,a=r.store,l=e.useRef(null);return i(o,{children:t.map((function(e){return n(c.li,{layout:!0,variants:f,initial:"initial",animate:"animate",exit:"exit",children:[e.name,i(c.button,{ref:l,variants:s,onClick:function(){a.remove(e.id)},children:"x"})]},e.id)}))})}var p=0,g=[],h=[],v={add:function(e){g=[].concat(r(g),[{id:++p,name:e}]),x()},remove:function(e){g=e?g.filter((function(n){return n.id!==e})):g.slice(0,-1),x(e)},subscribe:function(e){return h=[].concat(r(h),[e]),function(){h=h.filter((function(n){return n!==e}))}},getSnapshot:function(){return g}};function x(){var e,n=t(h);try{for(n.s();!(e=n.n()).done;){e.value.apply(void 0,arguments)}}catch(i){n.e(i)}finally{n.f()}}var y=function(){return[e.useSyncExternalStore(v.subscribe,v.getSnapshot),v]},b=function(r){var t,u,o=r.portalRef,c=e.useRef(null),d=y(),f=a(d,2),s=f[0],p=f[1];return n("div",{className:"trigger",children:[i("h1",{children:"Trigger"}),n("form",{ref:c,method:"dialog",onSubmit:function(){if(null!==c.current){var e=new FormData(c.current).get("name");null!==e&&p.add(e)}},children:[i("label",{htmlFor:"name",children:"Name"}),i("input",{type:"text",id:"name",name:"name"}),i("button",{type:"submit",children:"Submit"})]}),(null===(t=o.current)||void 0===t||null===(u=t.getElement)||void 0===u?void 0:u.call(t))&&l.createPortal(i(m,{list:s,store:p}),o.current.getElement())]})},R=u("div",{target:"e98d4nm0"})({name:"9787js",styles:".figures{display:flex;flex-wrap:wrap;gap:1em;padding:1em;}figure{margin:0;background-color:#5555;border-radius:0.3em;padding:1em;display:inline-block;flex-grow:1;}"});function S(e){var r=e.list;return n("figure",{children:[i("figcaption",{children:"No portal list"}),i(o,{children:r.map((function(e){var n=e.id,r=e.name;return i(c.li,{initial:{x:10},animate:{x:0},exit:{x:10},children:r},n)}))})]})}function j(){var r=e.useRef({}),t=y(),l=a(t,2),u=l[0];return l[1],n(R,{children:[i(b,{portalRef:r}),n("section",{className:"figures",children:[i("figure",{children:i("pre",{children:i("code",{children:JSON.stringify(u,null,2)})})}),i(S,{list:u}),i(d,{ref:r})]})]})}export{j as default};
