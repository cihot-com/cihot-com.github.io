import{r as t}from"./resolve-element-6bcb316e.js";import{c as n,e,h as s,j as a,S as r,H as o,k as i,s as l,l as u,n as c,m as h,o as f,q as m,r as p,i as y,p as d,d as g,t as A,x as v,y as k,z as w}from"./SVGVisualElement-77214677.js";const b=s((()=>void 0!==window.ScrollTimeline));class GroupPlaybackControls{constructor(t){this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let e=0;e<this.animations.length;e++)this.animations[e][t]=n}attachTimeline(t){const s=this.animations.map((s=>{if(!b()||!s.attachTimeline)return s.pause(),function(t,s){let a;const r=()=>{const{currentTime:n}=s,e=(null===n?0:n.value)/100;a!==e&&t(e),a=e};return n.update(r,!0),()=>e(r)}((t=>{s.time=s.duration*t}),t);s.attachTimeline(t)}));return()=>{s.forEach(((t,n)=>{t&&t(),this.animations[n].stop()}))}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach((n=>n[t]()))}play(){this.runAll("play")}pause(){this.runAll("pause")}stop(){this.runAll("stop")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function M(t){const n={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},e=a(t)?new r(n,{enableHardwareAcceleration:!1}):new o(n,{enableHardwareAcceleration:!0});e.mount(t),i.set(t,e)}function x(t,n=100){const e=l({keyframes:[0,n],...t}),s=Math.min(u(e),c);return{type:"keyframes",ease:t=>e.next(s*t).value/n,duration:h(s)}}function T(t,n,e,s){var a;return"number"==typeof n?n:n.startsWith("-")||n.startsWith("+")?Math.max(0,t+parseFloat(n)):"<"===n?e:null!==(a=s.get(n))&&void 0!==a?a:t}const E=(t,n,e)=>{const s=n-t;return((e-t)%s+s)%s+t};function S(t,n){return f(t)?t[E(0,t.length,n)]:t}function j(t,n,e,s,a,r){!function(t,n,e){for(let s=0;s<t.length;s++){const a=t[s];a.at>n&&a.at<e&&(p(t,a),s--)}}(t,a,r);for(let o=0;o<n.length;o++)t.push({value:n[o],at:m(a,r,s[o]),easing:S(e,o)})}function C(t,n){return t.at===n.at?null===t.value?1:null===n.value?-1:0:t.at-n.at}const G="easeInOut";function O(t,n){return!n.has(t)&&n.set(t,{}),n.get(t)}function P(t,n){return n[t]||(n[t]=[]),n[t]}function H(t){return Array.isArray(t)?t:[t]}function V(t,n){return t[n]?{...t,...t[n]}:{...t}}const W=t=>"number"==typeof t,q=t=>t.every(W);function z(n,e,s,a){const r=t(n,a),o=r.length,l=[];for(let t=0;t<o;t++){const n=r[t];i.has(n)||M(n);const a=i.get(n),u={...s};"function"==typeof u.delay&&(u.delay=u.delay(t,o)),l.push(...w(a,{...e,transition:u},{}))}return new GroupPlaybackControls(l)}function B(n,e,s){const a=[],r=function(n,{defaultTransition:e={},...s}={},a){const r=e.duration||.3,o=new Map,i=new Map,l={},u=new Map;let c=0,h=0,f=0;for(let m=0;m<n.length;m++){const s=n[m];if("string"==typeof s){u.set(s,h);continue}if(!Array.isArray(s)){u.set(s.name,T(h,s.at,c,u));continue}let[o,p,d={}]=s;void 0!==d.at&&(h=T(h,d.at,c,u));let k=0;const w=(t,n,s,a=0,o=0)=>{const i=H(t),{delay:l=0,times:u=g(i),type:c="keyframes",...m}=n;let{ease:p=e.ease||"easeOut",duration:y}=n;const d="function"==typeof l?l(a,o):l,w=i.length;if(w<=2&&"spring"===c){let t=100;if(2===w&&q(i)){const n=i[1]-i[0];t=Math.abs(n)}const n={...m};void 0!==y&&(n.duration=v(y));const e=x(n,t);p=e.ease,y=e.duration}null!=y||(y=r);const b=h+d,M=b+y;1===u.length&&0===u[0]&&(u[1]=1);const T=u.length-i.length;T>0&&A(u,T),1===i.length&&i.unshift(null),j(s,i,p,u,b,M),k=Math.max(d+y,k),f=Math.max(M,f)};if(y(o))w(p,d,P("default",O(o,i)));else{const n=t(o,a,l),e=n.length;for(let t=0;t<e;t++){const s=O(n[t],i);for(const n in p)w(p[n],V(d,n),P(n,s),t,e)}c=h,h+=k}}return i.forEach(((t,n)=>{for(const a in t){const r=t[a];r.sort(C);const i=[],l=[],u=[];for(let t=0;t<r.length;t++){const{at:n,value:e,easing:s}=r[t];i.push(e),l.push(d(0,f,n)),u.push(s||"easeOut")}0!==l[0]&&(l.unshift(0),i.unshift(i[0]),u.unshift(G)),1!==l[l.length-1]&&(l.push(1),i.push(null)),o.has(n)||o.set(n,{keyframes:{},transition:{}});const c=o.get(n);c.keyframes[a]=i,c.transition[a]={...e,duration:f,ease:u,times:l,...s}}})),o}(n,e,s);return r.forEach((({keyframes:t,transition:n},e)=>{let s;s=y(e)?k(e,t.default,n.default):z(e,t,n),a.push(s)})),new GroupPlaybackControls(a)}const F=t=>function(n,e,s){let a;var r;return r=n,a=Array.isArray(r)&&Array.isArray(r[0])?B(n,e,t):function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?z(n,e,s,t):k(n,e,s),t&&t.animations.push(a),a},I=F();export{I as a,F as c};
