import{b as e,j as t}from"./index-890d70c3.js";import{a}from"./axios-80c154f5.js";import{G as s,I as o}from"./iconBase-d4417ec4.js";const n=a.create({baseURL:"http://localhost:3300"});function r(e){return s({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M3,3 L21,21 M3,21 L21,3"}}]})(e)}n.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.resolve(e))),n.interceptors.response.use((e=>"ok"),(e=>{var t,a;const s=null==(t=e.response)?void 0:t.status,o=null==(a=e.response)?void 0:a.data;return Promise.resolve({data:o,status:s})}));const l=()=>{const[a,s]=e.useState(""),[o,r]=e.useState(""),[l,c]=e.useState(""),[d,u]=e.useState(null),[h,x]=e.useState((()=>[]));e.useEffect((()=>(r(localStorage.getItem("baseUrl")||"http://localhost:3300"),s(localStorage.getItem("method")||"GET"),c(localStorage.getItem("url")||"/api/hello"),x(JSON.parse(localStorage.getItem("data")||"[]")),window.onbeforeunload=()=>{localStorage.setItem("baseUrl",o),localStorage.setItem("method",a),localStorage.setItem("url",l),localStorage.setItem("data",JSON.stringify(h))},()=>{window.onbeforeunload=null})),[]);return t.jsxs(t.Fragment,{children:[t.jsx("h3",{children:"Api"}),t.jsxs("div",{className:"control-panel",children:[t.jsxs("form",{method:"dialog",onSubmit:async e=>{e.preventDefault()},children:[t.jsx("input",{type:"text",value:o,onChange:e=>r(e.target.value)}),t.jsx("br",{}),t.jsxs("select",{value:a,onChange:e=>s(e.target.value),children:[t.jsx("option",{children:"GET"}),t.jsx("option",{children:"POST"}),t.jsx("option",{children:"PUT"}),t.jsx("option",{children:"PATCH"}),t.jsx("option",{children:"DELETE"}),t.jsx("option",{children:"OPTIONS"}),t.jsx("option",{children:"HEAD"})]}),t.jsx("input",{type:"text",value:l,onChange:e=>c(e.target.value)}),t.jsx("button",{onClick:async()=>{const e={};if(h.length){const t=h.reduce(((e,t)=>(e[t.name]=t.value,e)),{});"GET"===a||"DELETE"===a||"OPTIONS"===a||"HEAD"===a?e.params=t:"POST"!==a&&"PUT"!==a&&"PATCH"!==a||(e.data=t)}try{n.defaults.baseURL=o;const t=await n.request({method:a,url:l,...e});u(t)}catch(t){u(t)}},children:"SEND"}),t.jsx("br",{}),t.jsx(i,{data:h,setData:x})]}),t.jsx("pre",{children:JSON.stringify(d,null,2)})]})]})};function i({data:e,setData:a}){return t.jsxs("div",{className:"data",children:[t.jsx("div",{children:t.jsx("button",{onClick:()=>{a([...e,{name:"",value:""}])},children:"Add"})}),t.jsx("div",{children:e.map(((s,n)=>t.jsxs("div",{children:[t.jsx("input",{type:"text",placeholder:"name",value:s.name,onChange:t=>{const s=[...e];s[n].name=t.target.value,a(s)}}),t.jsx("input",{type:"text",placeholder:"value",value:s.value,onChange:t=>{const s=[...e];s[n].value=t.target.value,a(s)}}),t.jsx(o.Provider,{value:{color:"white"},children:t.jsx("button",{onClick:()=>{const t=[...e];t.splice(n,1),a(t)},tabIndex:-1,children:t.jsx(r,{})})})]},n)))})]})}const c=()=>t.jsx("div",{children:t.jsx("h3",{children:"User"})}),d=()=>t.jsxs("section",{id:"express",children:[t.jsx("h3",{children:"Express"}),t.jsx(l,{}),t.jsx(c,{})]});export{d as default};
