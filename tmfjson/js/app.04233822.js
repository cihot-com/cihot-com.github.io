(function(t){function e(e){for(var r,o,s=e[0],l=e[1],c=e[2],u=0,d=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);f&&f(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var f=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"17ba":function(t,e,n){"use strict";n("221a")},"221a":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("fd85"),n("15db"),n("c026"),n("4031");var r=n("e832"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"},on:{dragover:function(t){t.preventDefault()},dragstart:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),t.drop.apply(null,arguments)}}},[0===t.filelist.length?n("div",{staticClass:"card"},[n("div",{staticClass:"card-header fs-5 bg-info fw-bold p-3"},[t._v("사용방법")]),t._m(0)]):n("file-manager",{attrs:{filelist:t.filelist,translateWorkerPromise:t.translateWorkerPromise}})],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ol",{staticClass:"list-group list-group-flush"},[n("li",{staticClass:"list-group-item"},[t._v("마우스를 사용하여 "),n("kbd",[t._v(".fjson")]),t._v(" 파일을 드래그하여 여기로 드랍합니다.")]),n("li",{staticClass:"list-group-item"},[n("kbd",[t._v("읽기")]),t._v("버튼으로 파일에서 텍스트 내용을 읽습니다.")]),n("li",{staticClass:"list-group-item"},[n("kbd",[t._v("소스에서 타겟으로 복사")]),t._v(" 또는 "),n("kbd",[t._v("번체에서 간체로 전환")]),t._v("을 진행합니다.")]),n("li",{staticClass:"list-group-item"},[t._v("상태변화 확인을 마친 후, "),n("kbd",[t._v("다운로드")]),t._v(" 버튼을 누릅니다.")])])}],o=n("68d6"),s=n("7a28"),l=(n("c1c3"),n("241c"),n("5a85"),n("534d"),n("862d"),n("e28c"),n("dddc"),n("32ec"),n("6991"),n("4a00"),n("f480"),n("ada9"),n("4454"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("file-list",{attrs:{filelist:t.filelist,translateWorkerPromise:t.translateWorkerPromise}})],1)}),c=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",[n("i",{staticClass:"bi-files"}),t._v(t._s(t.filelist.length)+" "),n("button",{staticClass:"btn btn-dark",on:{click:t.read}},[n("i",{staticClass:"bi-eye"}),t._v("읽기 ")]),n("button",{staticClass:"btn btn-dark",on:{click:t.copy}},[n("i",{staticClass:"bi-subtract"}),t._v("소스를 타겟에 복사 ")]),n("button",{staticClass:"btn btn-dark",on:{click:t.translate}},[n("i",{staticClass:"bi-translate"}),t._v("번체->간체 ")]),n("button",{staticClass:"btn",class:t.downloadable?"btn-dark":"btn-danger",on:{click:t.download}},[n("i",{staticClass:"bi-download"}),t._v("다운로드 ")]),n("button",{staticClass:"btn btn-dark",on:{click:t.remove}},[n("i",{staticClass:"bi-trash"}),t._v("삭제 ")])]),n("section",[n("table",{staticClass:"FileList table table-hover"},[n("tbody",t._l(t.filelist,(function(e,r){return n("file",{key:e.name,ref:"file_"+r,refInFor:!0,attrs:{file:e,translateWorkerPromise:t.translateWorkerPromise},on:{remove:function(e){return t.removeFile(r)}}})})),1)])])])},u=[],d=(n("5e5b"),n("0ffc"),n("f432"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticClass:"File",attrs:{scope:"row"}},[t._m(0),n("td",{staticClass:"text-start",attrs:{scope:"col"},domProps:{textContent:t._s(t.file.name)}}),n("td",{attrs:{scope:"col"},domProps:{textContent:t._s(t.file.size)}}),n("td",{attrs:{scope:"col"},domProps:{textContent:t._s(t.file.tranlated)}}),n("td",{attrs:{scope:"col"}},[n("button",{staticClass:"btn",attrs:{title:"파일 내용 읽기"},on:{click:t.read}},[n("i",{class:t.readed?t.isJSON?"bi-eye-fill text-primary":"bi-eye-fill text-warning":"bi-eye"})]),n("button",{staticClass:"btn",attrs:{title:"소스를 타겟에 복붙하기"},on:{click:t.copy}},[n("i",{staticClass:"bi-subtract",class:t.copied?"text-primary":""})]),n("button",{staticClass:"btn btn-light",class:t.translated?"text-primary":"",on:{click:t.translate}},[n("i",{staticClass:"bi-translate"}),t._v(t._s(t.translatedCount)+" ")]),n("button",{staticClass:"btn",attrs:{title:"파일 다운로드"},on:{click:t.download}},[n("i",{staticClass:"bi-download",class:t.downloadable?"text-primary":"text-error"})]),n("button",{staticClass:"btn bs-primary",attrs:{title:"파일 삭제"},on:{click:t.emitRemove}},[n("i",{staticClass:"icon bi-trash"})])])])}),p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",{staticStyle:{width:"2rem"},attrs:{scope:"col-auto"}},[n("i",{staticClass:"bi-file-earmark"})])}],b=n("98ad");function m(t,e){var n,r=document.createElement("a");n=e instanceof Blob?e:new Blob([e]);var i=window.URL.createObjectURL(n);r.href=i,r.download=t,r.click(),setTimeout((function(){return window.URL.revokeObjectURL(i)}),5e3)}var v={props:["file","translateWorkerPromise"],mounted:function(){console.log(this.file)},data:function(){return{translatedCount:0,translatedEndTimeout:-1,translated:!1,readed:!1,isJSON:!1,copied:!1,isError:void 0,downloadable:!1}},computed:{status:function(){var t,e=this;return t={"text-primary":e.read},Object(b["a"])(t,"text-primary",!e.isJSON),Object(b["a"])(t,"text-warning",!e.isJSON),Object(b["a"])(t,"text-error",!e.readed),t}},methods:{read:function(){var t=this;if(t.readed)console.log("Readed skip:",t.file.name);else{var e=new FileReader;e.onload=function(e){var n=e.target.result;t.file.text=n,t.readed=!0;try{t.file.json=JSON.parse(t.file.text),t.isJSON=!0}catch(r){t.isJSON=!1}},e.readAsText(t.file),e.onabort=e.onerror=function(){t.readed=!1}}},copy:function(){var t=this;if(!t.copied)try{t.file.json.category.forEach((function(t){t.segments.forEach((function(t){t.target=t.source}))})),t.file.newText=JSON.stringify(t.file.json,null,2),t.copied=!0}catch(e){console.log(e)}},download:function(){var t=this;t.file.newText&&m(t.file.name,t.file.newText)},translate:function(){var t=this;t.translateWorkerPromise.then((function(e){t.file.json?(t.translatedCount=0,t.file.newJson={category:[]},t.file.json.category.forEach((function(n,r){var i=[];t.file.newJson[r]={name:n.name,segments:i},n.segments.forEach((function(n,r){i[r]={};var a=function(a){var o=n[a];i[r][a]=o,"target"===a&&e.send(o,(function(e){e.ok?(i[r][a]=e.data,t.translatedCount+=1):t.translatedCount+=1e-4}))};for(var o in n)a(o)}))}))):(t.read(),console.log("no json"))}))},emitRemove:function(){this.$emit("remove")}},watch:{translatedCount:function(t,e){var n=this,r=this;clearTimeout(r.translatedEndTimeout),0<t?r.translatedEndTimeout=setTimeout((function(){r.file.newText=JSON.stringify(n.file.newJson,null,2),r.translated=!0}),1e3):r.translated=!1}}},h=v,w=(n("742d"),n("a6c2")),g=Object(w["a"])(h,d,p,!1,null,"b1f83f4a",null),_=g.exports,y=n("990d"),k=n.n(y),C={props:["filelist","translateWorkerPromise"],components:{File:_},data:function(){return{downloadable:!0}},updated:function(){console.log(this.list)},methods:{removeFile:function(t){this.filelist.splice(t,1)},copySourceToTarget:function(){this.filelist},read:function(){var t=this;this.filelist.forEach((function(e,n){t.$refs["file_".concat(n)].forEach((function(t){t.readed?console.log("skip",e.name):t.read()}))}))},copy:function(){var t=this;this.filelist.forEach((function(e,n){t.$refs["file_".concat(n)].forEach((function(t){return t.copy()}))}))},download:function(){var t=this,e=new k.a,n=0;this.filelist.forEach((function(t){t.newText&&(e.file(t.name,t.newText),n++)})),n?e.generateAsync({type:"blob"}).then((function(t){x("all_fjson_files.zip",t)})):(this.downloadable=!1,setTimeout((function(){t.downloadable=!0}),1e3))},translate:function(){var t=this;this.filelist.forEach((function(e,n){t.$refs["file_".concat(n)].forEach((function(t){return t.translate()}))}))},remove:function(){this.filelist.splice(0,this.filelist.length)}}};function x(t,e){var n,r=document.createElement("a");n=e instanceof Blob?e:new Blob([e]);var i=window.URL.createObjectURL(n);r.href=i,r.download=t,r.click(),setTimeout((function(){return window.URL.revokeObjectURL(i)}),5e3)}var O=C,j=(n("17ba"),Object(w["a"])(O,f,u,!1,null,"2720a5dd",null)),E=j.exports,P={props:["filelist","translateWorkerPromise"],components:{FileList:E},data:function(){return{}}},T=P,S=Object(w["a"])(T,l,c,!1,null,"499ce9a8",null),J=S.exports,R=Promise.all([W("/tm/dict0.txt"),W("/tm/dict1.txt")]).then((function(t){var e=t.reduce((function(t,e){return t.concat(e)})),n=new TranslationWorker("/tm/");return n.send({dict:e,type:"tw->cn"},console.log),n}));function W(t){return $.apply(this,arguments)}function $(){return $=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.text()})).then((function(t){var e=[];return t.trim().split(/\r?\n/).forEach((function(t){var n=t.split("\t"),r=Object(o["a"])(n,2),i=r[0],a=r[1];if(i&&a){var s=i.length,l=a.length;s&&l&&e.push([i,a])}})),e}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),$.apply(this,arguments)}var L={name:"App",components:{FileManager:J},mounted:function(){},data:function(){return{translateWorkerPromise:R,filelist:[]}},methods:{drop:function(t){this.filelist=Array.from(t.dataTransfer.files),console.log(this.filelist)}}},F=L,N=(n("577c"),Object(w["a"])(F,i,a,!1,null,"c48fa50e",null)),U=N.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(U)}}).$mount("#app")},"577c":function(t,e,n){"use strict";n("f9e2")},"742d":function(t,e,n){"use strict";n("927d")},"927d":function(t,e,n){},f9e2:function(t,e,n){}});